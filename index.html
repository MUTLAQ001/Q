<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="جهّز شعبك وسجّلها بضغطة زر.">
	<meta name="theme-color" content="#0a0a0a">
	<title>مُعِدّ أداة التعبئة</title>
	<link id="favicon" rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZiI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIHJ4PSI5MCIgZmlsbD0iIzBhMGEwYSIvPjxwYXRoIGQ9Ik0yMC44NTMgMTkuMTQ3YTEuMDAxIDEuMDAxIDAgMCAwLTEuNDEyIDBsLTcuNTg4LTcuNTg4TDkuNDY4IDExLjUzbDcuNTg5IDcuNTg4YTEuMDA0IDEuMDA0IDAgMCAwIDEuNDEyLjAwMWwuMzg0LS4zODNhMSAxIDAgMCAwIDAtMS40MTVsLTIuOTU0LTIuOTU0IDEuNTM2LTEuNTM2IDMuNjY4IDMuNjY3YTEgMSAwIDAgMCAxLjQxNC0xLjQxNGwtMy42NjctMy42NjggMS41MTctMS41MTggMi45NTQgMi45NTRhMSAxIDAgMCAwIDEuNDE0IDBsLjM4My0uMzg0YTEgMSAwIDAgMCAwLTEuNDE0bC03LjU4OC03LjU4OEwzLjEzMiAxNS4yNThhMSAxIDAgMCAwIDAgMS40MTRsMi40NzUgMi40NzVhMSAxIDAgMCAwIDEuNDE0IDBsMi44MjItMi44MjIgMS40NjQgMS40NjQtMi44MjEgMi44MjFhMSAxIDAgMCAwIDAgMS40MTRsMi40NzUgMi40NzVhMSAxIDAgMCAwIDEuNDE0IDBMMTMuODY5IDE5LjVsMi44MjEgMi44MjFhMSAxIDAgMCAwIDEuNDE0IDBsMi43NS0yLjczWm0tOS41MDItMTIuMDYxIDIuMTIyIDIuMTIxLTMuNTU2IDMuNTU2LTIuMTIyLTIuMTIxWm0tMy45MTMgMy45MTMgMi4xMjEgMi4xMjItNi43MTcgNi43MTctMi4xMjItMi4xMjFaTTUuNTYxIDE0LjE4MmwyLjEyMSAyLjEyMSA0Ljk1IDQuOTUtMi4xMjEgMi4xMjEtLjcxNC0uNzE3LTQuMjM4LTQuMjM4Wm0xMC41NDgtOC4xMzJhMSAxIDAgMSAwLTEuNDE0LTEuNDE0IDEgMSAwIDAgMCAxLjQxNCAxLjQxNFoiLz48L3N2Zz4=">
	<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
	<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
	<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet">
	<style>
		@import url("https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap");
		@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;700&display=swap");
		:root{--color-primary:#9333ea;--color-primary-dark:#7e22ce;--color-secondary:#ec4899;--color-bg:#111827;--color-card:rgba(31, 41, 55, 0.5);--color-border:rgba(255, 255, 255, 0.1);--color-text:#e5e7eb;--color-text-muted:#9ca3af;--font-body:"Cairo",sans-serif;--font-title:"IBM Plex Sans Arabic",sans-serif;--radius:16px;--radius-md:12px;--radius-full:999px;--transition:0.3s cubic-bezier(0.25,0.8,0.25,1);--rgb-primary:147, 51, 234;}
		* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
		html{ scroll-behavior:smooth; scrollbar-width: none; }
		body{font-family:var(--font-body);background-color:var(--color-bg);color:var(--color-text);direction:rtl;overflow-x:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
		::-webkit-scrollbar { display: none; }
        @keyframes gradient-animation{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
		@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
		@keyframes scaleIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
		@keyframes move-aurora{0%{transform:translate(-50%,-50%) rotate(0deg) scale(1)}50%{transform:translate(-50%,-50%) rotate(180deg) scale(1.2)}100%{transform:translate(-50%,-50%) rotate(360deg) scale(1)}}
		*:focus-visible{outline:2px solid var(--color-primary);outline-offset:3px;border-radius:6px}
        .background-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2;overflow:hidden;background-color:#030712;}
		.background-container::before { content:''; position:absolute; top:50%; left:50%; width:100vmin; height:100vmin; background:radial-gradient(circle at center, hsla(260, 80%, 50%, 0.15) 0%, transparent 40%); animation:move-aurora 30s infinite linear; }
        .app{min-height:100vh;position:relative;padding:2rem 1rem; display: flex; align-items: center; justify-content: center;}
		.container{width:100%;max-width:600px;z-index:1;display:flex;flex-direction:column;gap:1.5rem;margin:0 auto;position:relative}
		.header{text-align:center;animation:fadeInUp .8s var(--transition) both}
		.title{font-family:var(--font-title);font-weight:700;font-size:2.8rem;margin-bottom:0.25rem;background:linear-gradient(90deg,var(--color-secondary),var(--color-primary));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:200% 200%;animation:gradient-animation 5s ease-in-out infinite; display: flex; align-items: center; justify-content: center; gap: 0.75rem;}
		.subtitle{color:var(--color-text-muted);font-size:1rem;animation:fadeInUp .8s var(--transition) .2s both; letter-spacing: 0.5px;}
        .card{background:var(--color-card);border:1px solid var(--color-border);border-radius:var(--radius);padding:1.5rem;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);position:relative;animation:scaleIn .8s var(--transition) .4s both;box-shadow: 0 16px 40px -12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.05);}
        .input-grid{display: grid; grid-template-columns: 1fr; gap: 1.5rem; margin-top: 1.5rem;}
        .input-group label{display:flex;align-items:center;gap:0.5rem;font-size:1.1rem;color:var(--color-text);margin-bottom: 0.75rem; font-weight: 600;}
        .input-group label i { color: var(--color-primary); }
		.input-group textarea{width:100%;background:rgba(17, 24, 39, 0.5);border:1px solid var(--color-border);border-radius:var(--radius-md);padding:.9rem 1.2rem;color:var(--color-text);font-family:var(--font-body);font-size:1rem;transition: all var(--transition); resize: vertical; min-height: 140px;}
		.input-group textarea:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px rgba(var(--rgb-primary), 0.4);}
        .action-button{width:100%;padding:1rem;font-family:var(--font-title);font-size:1.1rem;font-weight:700;border:none;border-radius:var(--radius-full);cursor:pointer;background:linear-gradient(90deg,var(--color-primary-dark),var(--color-primary));color:#fff;transition:all .2s ease-in-out;display:flex;justify-content:center;align-items:center;gap:.75rem;user-select:none; margin-top: 1.5rem; box-shadow: 0 4px 15px rgba(var(--rgb-primary),0.2);}
		.action-button:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(var(--rgb-primary),0.3); filter: brightness(1.1);}
        .bookmarklet-result-section{display:flex; flex-direction: column; align-items:center;gap:1rem;margin-top:1.5rem;padding:1.5rem;border-radius:var(--radius);animation:fadeInUp .6s ease both;transition:background .4s ease;background:radial-gradient(circle,rgba(var(--rgb-primary),0.05) 0%,transparent 70%),rgba(31, 41, 55, 0.3); border: 1px solid var(--color-border);}
        .bookmarklet-result-section p { font-size: 1rem; font-weight: 600; color: var(--color-text-muted); line-height: 1.6; }
        .bookmarklet-link { display: inline-block; background-image: linear-gradient(to right, var(--color-secondary) 0%, var(--color-primary) 51%, var(--color-secondary) 100%); background-size: 200% auto; color: white; padding: 12px 24px; border-radius: var(--radius-full); font-weight: bold; text-decoration: none; cursor: grab; box-shadow: 0 4px 15px rgba(0,0,0,0.2); transition: all 0.4s ease; display:flex; align-items:center; gap: 0.75rem;}
        .bookmarklet-link:hover { background-position: right center; transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px rgba(var(--rgb-primary), 0.4); }
		@media (min-width: 768px) { .input-grid { grid-template-columns: 1fr 1fr; } }
	</style>
</head>
<body>
    <div class="background-container"></div>

	<noscript>You need to enable JavaScript to run this app.</noscript>
	<div id="root"></div>

	<script type="text/babel">
		const { useState, useCallback, StrictMode } = React;

		function App() {
            const [regularSections, setRegularSections] = useState('');
            const [freeSections, setFreeSections] = useState('');
            const [bookmarkletComponent, setBookmarkletComponent] = useState(null);

            const handleGenerateClick = useCallback(() => {
                const regularArray = regularSections.split(/[\n\s,]+/).map(s => s.trim()).filter(Boolean);
                const freeArray = freeSections.split(/[\n\s,]+/).map(s => s.trim()).filter(Boolean);

                const bookmarkletLogic = `
                    (function() {
                        'use strict';
                        console.log("QU Section Filler: Initialized");
                        const regular = ${JSON.stringify(regularArray)};
                        const free = ${JSON.stringify(freeArray)};
                        let filledCount = 0; let notFoundCount = 0;

                        function fillInputs(prefix, sections) {
                            for (let i = 0; i < sections.length; i++) {
                                const inputId = prefix + 'Section' + i;
                                const inputElement = document.getElementById(inputId);
                                if (inputElement) {
                                    inputElement.value = sections[i];
                                    const blurEvent = new Event('blur', { bubbles: true });
                                    const keyupEvent = new Event('keyup', { bubbles: true });
                                    inputElement.dispatchEvent(blurEvent);
                                    inputElement.dispatchEvent(keyupEvent);
                                    console.log('Filled ' + inputId + ' with: ' + sections[i]);
                                    filledCount++;
                                } else {
                                    console.error('Could not find input: ' + inputId);
                                    notFoundCount++;
                                    break; 
                                }
                            }
                        }
                        
                        fillInputs('add', regular);
                        fillInputs('free', free);
                        
                        let msg = "تمت محاولة ملء الشعب بنجاح!\\n\\n✓ تم تعبئة " + filledCount + " شعبة." + (notFoundCount > 0 ? "\\n✗ لم يتم العثور على " + notFoundCount + " خانة (ربما أدخلت شعب أكثر من المتاح)." : "") + "\\n\\nالرجاء الانتظار قليلاً لتحميل تفاصيل المقررات.";
                        alert(msg);
                    })();
                `;

                const encodedLogic = "javascript:" + encodeURIComponent(bookmarkletLogic.replace(/\s{2,}/g, ' '));
                
                const onLinkClick = (e) => {
                    e.preventDefault();
                    Swal.fire({
                        title: 'خطأ في الاستخدام!',
                        html: '<p style="color: var(--color-text-muted);">لا تضغط على الزر هنا. يجب عليك <strong>سحبه بزر الماوس</strong> وإفلاته في شريط الإشارات المرجعية (Bookmarks Bar) في أعلى المتصفح.</p>',
                        icon: 'warning',
                        confirmButtonText: 'حسنًا، فهمت',
                        customClass: { popup: 'swal2-popup', confirmButton: 'swal2-confirm' },
                        background: 'var(--color-card)',
                        color: 'var(--color-text)'
                    });
                };
                
                setBookmarkletComponent(
                    <a href={encodedLogic} className="bookmarklet-link" onClick={onLinkClick}>
                        <i className="ri-drag-move-2-line"></i>
                        <span>اسحبني إلى شريط الإشارات</span>
                    </a>
                );
            }, [regularSections, freeSections]);

			return (
				<div className="app">
					<div className="container">
						<header className="header">
							<h1 className="title"><i className="ri-magic-line"></i> مُعِدّ أداة التعبئة</h1>
							<p className="subtitle">جهّز شعبك، اسحب الأداة، وسجّلها بضغطة زر</p>
						</header>

                        <div className="card">
                            <div className="input-grid">
                                <div className="input-group">
                                    <label htmlFor="regular-sections-input"><i className="ri-list-check-3"></i> الشعب العادية</label>
                                    <textarea 
                                        id="regular-sections-input"
                                        value={regularSections}
                                        onChange={e => setRegularSections(e.target.value)}
                                        placeholder="مثال:&#10;3333&#10;1122&#10;4567"
                                    />
                                </div>
                                <div className="input-group">
                                    <label htmlFor="free-sections-input"><i className="ri-award-line"></i> الشعب الحرة</label>
                                    <textarea
                                        id="free-sections-input"
                                        value={freeSections}
                                        onChange={e => setFreeSections(e.target.value)}
                                        placeholder="مثال:&#10;8899&#10;7766"
                                    />
                                </div>
                            </div>

                            <button className="action-button" onClick={handleGenerateClick}>
                                <i className="ri-sparkling-2-line"></i>
                                أنشئ أداة التعبئة
                            </button>
                        </div>
						
                        {bookmarkletComponent && (
                            <div className="bookmarklet-result-section">
                                <p>الخطوة الأخيرة: اسحب الزر التالي وأفلته في شريط الإشارات المرجعية</p>
                                {bookmarkletComponent}
                            </div>
                        )}
					</div>
				</div>
			);
		}
		
		const root = ReactDOM.createRoot(document.getElementById("root"));
		root.render(<StrictMode><App /></StrictMode>);
	</script>
</body>
</html>
